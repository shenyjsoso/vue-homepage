{"remainingRequest":"/Users/soso/hygst/HOMEPAGE/homepage-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/soso/hygst/HOMEPAGE/homepage-web/src/components/Sidebar/components/SideDraggable.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/soso/hygst/HOMEPAGE/homepage-web/src/components/Sidebar/components/SideDraggable.vue","mtime":1589789791149},{"path":"/Users/soso/hygst/HOMEPAGE/homepage-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/soso/hygst/HOMEPAGE/homepage-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/soso/hygst/HOMEPAGE/homepage-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/soso/hygst/HOMEPAGE/homepage-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/soso/hygst/HOMEPAGE/homepage-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5lbC1kaWFsb2dfX2JvZHkgewogIHBhZGRpbmc6IDAgMjBweDsKfQo="},{"version":3,"sources":["SideDraggable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8RA;AACA;AACA","file":"SideDraggable.vue","sourceRoot":"src/components/Sidebar/components","sourcesContent":["<!-- 侧边栏拖拉框 -->\n<template>\n  <div class=\"SideDraggable\">\n    <div class=\"set\">\n      <div>\n        <span>快速入口</span>\n      </div>\n      <div class=\"shezhi\" @click.prevent=\"shezhi\">\n        <img src=\"@/assets/img/sidebar/shezhi.png\" alt />\n      </div>\n    </div>\n\n    <draggable\n      class=\"Draggable\"\n      v-model=\"todo\"\n      v-bind=\"dragOptions\"\n      @change=\"change\"\n      v-loading=\"loading\"\n    >\n      <div v-for=\"item in todo\" class=\"drag-list\" :key=\"item.id\" @click.stop=\"jumpTo(item.uri)\">\n        <img class=\"imgdiv\" :src=\"item.sysLogo\" alt />\n        <!-- <a :href=\"item.href\" target=\"_blank\">{{item.content}}</a> -->\n        <div>{{item.name}}</div>\n      </div>\n    </draggable>\n    <!-- 设置快捷入口的弹框 -->\n    <el-dialog :visible.sync=\"dialogVisible\" :close-on-click-modal=\"false\" width=\"55%\" top=\"5vh\" :before-close=\"handleClose\">\n      <span slot=\"title\" class=\"dialog-title\">\n        <span style=\"color:rgba(38,38,38,1);\">选择系统</span>\n        <span\n          style=\"font-size:12px;color:rgba(89,89,89,1);margin-left:5px\"\n        >(选择常用系统置于首页快速入口处，以便快速找到系统)</span>\n      </span>\n\n      <el-divider></el-divider>\n      <div\n        class=\"dialog-content\"\n        v-loading=\"dlloading\"\n        v-for=\"(item) of Authority\"\n        :key=\"item.dictId\"\n      >\n        <span>{{item.dictName}}</span>\n        <ul>\n          <li\n            :class=\"{isActive:isActive(childitem)}\"\n            v-for=\"childitem of item.spmlist\"\n            :key=\"childitem.id\"\n            @click=\"check(childitem)\"\n          >\n            <img class=\"logoimg\" :src=\"childitem.sysLogo\" alt />\n            <el-tooltip class=\"item\" effect=\"dark\" :content=\"childitem.name\" placement=\"top\" :disabled=\"!(childitem.name.length>6)\">\n             <span>{{childitem.name}}</span>\n             </el-tooltip>\n            <!-- 选中或没选择的图片样式-->\n            <img class=\"onimg\" src=\"@/assets/img/sidebar/sel.png\" alt v-show=\"isActive(childitem)\" />\n            <img\n              class=\"onimg\"\n              src=\"@/assets/img/sidebar/unsel.png\"\n              alt\n              v-show=\"!isActive(childitem)\"\n            />\n          </li>\n          <!-- <li>\n            <img class=\"logoimg\" src=\"@/assets/img/sidebar/daping-icon.png\" alt='' />\n            <span>111111</span>\n            <img class=\"onimg\" src=\"@/assets/img/sidebar/unsel.png\" alt='' />\n          </li>-->\n        </ul>\n      </div>\n\n      <el-divider></el-divider>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"handleClose()\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"save()\">{{savetext}}</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n//这里可以导入其他文件（比如：组件，工具js，第三方插件js，json文件，图片文件等等）\nimport draggable from \"vuedraggable\";\nexport default {\n  //import引入的组件需要注入到对象中才能使用\n  components: {\n    draggable\n  },\n  data() {\n    //这里存放数据\n    return {\n      userId: 1, //临时写死userid\n      loading: false,\n      dlloading: false, //弹框加载样式\n      dialogVisible: false,\n      savetext:'确 定',\n      dragOptions: {\n        animation: 120,\n        scroll: true,\n        group: \"sortlist\",\n        ghostClass: \"ghost-style\"\n      },\n      todo: [\n        // {\n        //   id: 1,\n        //   content: \"数据质量分析\",\n        //   icon: \"daping-icon\",\n        //   href: \"http://121.36.137.188:8088/dataQuality/dataQualityAnalysis\"\n        // },\n        // {\n        //   id: 2,\n        //   content: \"用户管理\",\n        //   icon: \"daping-icon2\",\n        //   href: \"http://121.36.137.188:8082/um/userManage\"\n        // },\n      ],\n      Authority: [], //设置列表的所有数据\n      TemporaryAuthority: [] //临时选中的数据 只存了id\n    };\n  },\n  //计算属性 类似于data概念\n  computed: {\n    //   isActive(){\n    //   }\n  },\n  //监控data中的数据变化\n  watch: {},\n  //方法集合\n  methods: {\n    //判断是否是选中的数据\n    isActive(childitem) {\n      let isactive = false;\n      this.TemporaryAuthority.forEach(id => {\n        if (id == childitem.id) isactive = true;\n      });\n      return isactive;\n    },\n    //li元素点击事件\n    check(childitem) {\n      console.log(childitem);\n      let index = this.TemporaryAuthority.indexOf(childitem.id);\n      console.log(index);\n      if (index == -1) {\n        this.TemporaryAuthority.push(childitem.id);\n      } else {\n        this.TemporaryAuthority.splice(index, 1);\n      }\n      console.log(this.TemporaryAuthority);\n    },\n    //跳转链接\n    jumpTo(uri) {\n      console.log(uri);\n\n      //   window.open(e);\n    },\n    change(event) {\n      console.log(event);\n      console.log(this.todo);\n\n      this.loading = true;\n      let param = {\n        splist: this.todo,\n        userId: this.userId //临时写死\n      };\n      this.$ajax.sidebar.updateQuickEntry(param).then(\n        res => {\n          if (res?.data?.code == 200) {\n            \n            console.log(\"改变顺序\");\n            console.log(res);\n            //把值赋值到临时数据\n            // this.$message.success(res.data.message);\n          }\n          this.loading = false;\n        },\n        err => {\n          this.loading = false;\n          this.$message.error(err || \"请求失败\");\n        }\n      );\n    },\n    //获取拖动列表数据todo\n    gettodo() {\n        this.todo=[];//清空数据\n      this.loading = true;\n      let param = {\n        userId: this.userId //临时写死\n      };\n      this.$ajax.sidebar.getQuickEntryByUserId(param).then(\n        res => {\n            console.log(res.data);\n          if (res?.data?.code == 200) {\n            \n            console.log(\"获取列表\");\n            \n            this.todo = res.data.result;\n            //把值赋值到临时数据\n            res.data.result.forEach(e => {\n              this.TemporaryAuthority.push(e.id);\n            });\n          }\n          this.loading = false;\n        },\n        err => {\n          this.loading = false;\n          this.$message.error(err || \"请求失败\");\n        }\n      );\n    },\n    //设置按钮事件\n    shezhi() {\n      this.dialogVisible = true;\n      this.dlloading = true;\n      this.$ajax.sidebar.getAuthorityByName().then(\n        res => {\n          if (res?.data?.code == 200) {\n            \n            console.log(\"获取设置列表\");\n            console.log(res.data.result);\n            this.Authority = res.data.result.cmlist;\n          }\n          this.dlloading = false;\n        },\n        err => {\n          this.dlloading = false;\n          this.$message.error(err || \"请求失败\");\n        }\n      );\n    },\n    //保存按钮\n    save() {\n        this.savetext='保存中...';\n        let param = {\n            psqelist:[],\n            userId:this.userId\n        };\n        if(this.TemporaryAuthority.length>0)\n        {\n            this.TemporaryAuthority.forEach(id => {\n             param.psqelist.push({ permissionId: id, userId: this.userId });\n            });\n        }\n      console.log(param);\n      this.$ajax.sidebar.saveQuickEntry(param).then(\n        res => {\n          if (res?.data?.code == 200) {\n            \n            console.log(\"保存按钮\");\n            this.gettodo();\n            this.savetext='确 认'\n            this.TemporaryAuthority=[];//临时数据清空\n          }\n          this.dialogVisible = false;\n        },\n        err => {\n          this.dialogVisible = false;\n          this.TemporaryAuthority=[];//临时数据清空\n          this.savetext='确 认'\n          this.$message.error(err || \"请求失败\");\n        }\n      );\n    },\n    handleClose(){\n        console.log('关闭');    \n        this.dialogVisible = false;\n        this.TemporaryAuthority=[];//临时数据清空\n        this.todo.forEach(item => {//重新赋值\n            this.TemporaryAuthority.push(item.id);\n        });\n    }\n  },\n  //生命周期 - 创建完成（可以访问当前this实例）\n  created() {\n    this.gettodo();\n  },\n  //生命周期 - 挂载完成（可以访问DOM元素）\n  mounted() {},\n  beforeCreate() {}, //生命周期 - 创建之前\n  beforeMount() {}, //生命周期 - 挂载之前\n  beforeUpdate() {}, //生命周期 - 更新之前\n  updated() {}, //生命周期 - 更新之后\n  beforeDestroy() {}, //生命周期 - 销毁之前\n  destroyed() {}, //生命周期 - 销毁完成\n  activated() {} //如果页面有keep-alive缓存功能，这个函数会触发\n};\n</script>\n<style >\n.el-dialog__body {\n  padding: 0 20px;\n}\n</style>\n<style lang='less' scoped>\n//@import url(); 引入公共css类\n.SideDraggable {\n  //position: relative;\n  .set {\n    width: 216px;\n    height: 43px;\n    margin: 5px 0;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    div {\n      display: flex;\n      justify-content: center;\n      flex-direction: column;\n      align-items: center;\n      height: 100%;\n    }\n    .shezhi:hover {\n      cursor: pointer;\n    }\n    span {\n      font-size: 16px;\n    }\n  }\n\n  //可拖拽div\n  .drag-list {\n    height: 80px;\n    border: 1px #fff solid;\n    padding: 10px;\n    margin-bottom: 18px;\n    list-style: none;\n    background: rgba(242, 246, 247, 1);\n    border-radius: 8px;\n    cursor: pointer;\n    -webkit-transition: border 0.3s ease-in;\n    transition: border 0.3s ease-in;\n    display: flex;\n    justify-content: start;\n    align-items: center;\n    div {\n      display: flex;\n      justify-content: center;\n      flex-direction: column;\n      align-items: center;\n      height: 100%;\n    }\n    .imgdiv {\n      width: 48px;\n      height: 48px;\n      margin-right: 12px;\n      border-radius: 12px;\n    }\n    &:hover {\n      border: 1px solid #20a0ff;\n    }\n    // &:last-child{\n    //     margin-bottom: 150px;\n    // }\n  }\n  .el-divider--horizontal {\n    margin: 0;\n  }\n  .dialog-title {\n    display: flex;\n    justify-content: start;\n    align-items: flex-end;\n  }\n  .dialog-content {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: flex-start;\n    & > span {\n      text-align: left;\n      margin-top: 12px;\n      font-size: 14px;\n      font-family: MicrosoftYaHei;\n      color: rgba(89, 89, 89, 1);\n    }\n    ul {\n      display: flex;\n      justify-content: start;\n      align-items: center;\n      flex-wrap: wrap;\n      margin: 12px 0;\n\n      li {\n        width: 208px;\n        height: 80px;\n        background: rgba(242, 246, 247, 1);\n        border-radius: 8px;\n        position: relative;\n        margin-right: 24px;\n        margin-bottom: 12px;\n        cursor: pointer;\n        &:hover {\n          // border: 1px solid #20a0ff;\n          box-shadow: 0px 2px 6px 0px rgba(165, 166, 168, 0.5);\n        }\n        .logoimg {\n          width: 48px;\n          height: 48px;\n          position: absolute;\n          top: 16px;\n          left: 20px;\n        }\n        .onimg {\n          width: 24px;\n          height: 24px;\n          position: absolute;\n          top: 8px;\n          right: 8px;\n        }\n        span {\n          position: absolute;\n          overflow: hidden;\n          text-overflow: ellipsis; \n          white-space: nowrap;\n          top: 31px;\n          left: 80px;\n          right: 30px;\n          font-size: 14px;\n          font-family: MicrosoftYaHei;\n          color: rgba(38, 38, 38, 1);\n          text-align: left;\n        }\n      }\n    }\n  }\n  .isActive {\n    border: 2px solid rgba(85, 165, 255, 1);\n  }\n}\n</style>"]}]}